import{j as t}from"./jsx-runtime.K1e75nIr.js";import{r as o}from"./index.NEDEFKed.js";function y(){const[f,c]=o.useState(""),[s,r]=o.useState(!1),[p,d]=o.useState(""),i=o.useRef(null);function n(){i.current?.value?c(i.current.value):c("")}async function u(){const e=window.location.origin.includes(":4321")?"http://localhost:3030":window.location.origin;try{const a=btoa(JSON.stringify({url:f,base:e})),l=await fetch(`${e}/verify/${a}`);if(!l.ok){const x=await l.json();alert(x);return}return await l.json()}catch(a){alert(`Try again in a few seconds: ${a.message}`)}return""}async function h(){r(!0),n();const e=await u();e.length&&(d(e),await navigator.clipboard.writeText(e).then(()=>alert("Copied, paste in Stremio!")).catch(a=>{r(!1)})),r(!1)}async function w(){try{r(!0),n();const e=await u();e.length&&(d(e),window.location.href=e,r(!1))}catch{r(!1)}}return t.jsxs("div",{className:"grid grid-cols-1 gap-1",children:[t.jsx("div",{className:"text-base",children:"A Letterboxd URL containing a list of posters (including any sorting!):"}),t.jsx("div",{children:t.jsx("input",{type:"text",placeholder:"https://letterboxd.com/almosteffective/watchlist",className:"w-full border border-black text-tailwind rounded text-xl px-2 py-1",ref:i,onPaste:n,onKeyDown:n,onKeyUp:n,onBlur:n,onFocus:n})}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{className:"grow border border-white bg-white uppercase text-tailwind text-lg p-2 rounded font-bold hover:bg-tailwind hover:text-white hover:underline",onClick:w,disabled:s,children:s===!1?"Install":"..."}),t.jsx("button",{className:"grow border border-transparent hover:border-white bg-tailwind uppercase text-white text-lg p-2 rounded font-normal",onClick:h,disabled:s,children:s===!1?"Copy":"..."})]}),t.jsx("div",{className:"hidden",children:p})]})}export{y as default};
