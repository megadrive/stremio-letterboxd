import{j as o}from"./jsx-runtime.K1e75nIr.js";import{r as i}from"./index.NEDEFKed.js";function j(){const[s,c]=i.useState(""),[n,r]=i.useState(!1),a=i.useRef(null);function e(){a.current?.value?c(a.current.value):c("")}async function p(t){const l=/https:\/\/(www\.)?letterboxd\.com\/([A-Za-z0-9-_]+)(\/([A-Za-z0-9-_]+)\/([A-Za-z0-9-_]+))?/gi,w=/https:\/\/boxd\.it\/.+/gi;console.log(t),w.test(t)&&(console.log(`boxdit_url: ${t}`),t=await(await fetch(`/url/${encodeURIComponent(t)}`)).json(),console.log(`resolved url: ${t}`));const b=[...t.matchAll(l)];let[,,g,,u,f]=b[0];return u||(u="watchlist"),`${g}${f?`${`|${f}`}`:""}`}async function d(){const t=await p(s);return`stremio://${new URL(window.location.href).host}/${t}/manifest.json`}async function x(){if(r(!0),s.length){e();const t=await d();await navigator.clipboard.writeText(t).catch(l=>{})}r(!1)}async function h(){if(r(!0),s.length){e();const t=await d();window.location.href=t}r(!1)}return o.jsxs("div",{className:"grid grid-cols-1 gap-1",children:[o.jsx("div",{className:"text-base",children:"A user's Letterboxd URL or a List URL:"}),o.jsx("div",{children:o.jsx("input",{type:"text",placeholder:"https://letterboxd.com/almosteffective",className:"w-full border border-black text-tailwind rounded text-xl px-2 py-1",ref:a,onKeyDown:e,onKeyUp:e,onChange:e,onBlur:e,onPaste:e})}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{className:"grow border border-white bg-white uppercase text-tailwind text-lg p-2 rounded font-bold hover:bg-tailwind hover:text-white hover:underline",onClick:h,disabled:n,children:n===!1?"Install":"..."}),o.jsx("button",{className:"grow border border-transparent hover:border-white bg-tailwind uppercase text-white text-lg p-2 rounded font-normal",onClick:x,disabled:n,children:n===!1?"Copy":"..."})]})]})}export{j as default};
