import{j as e}from"./jsx-runtime.K1e75nIr.js";import{r as i}from"./index.NEDEFKed.js";function j(){const[s,c]=i.useState(""),[r,n]=i.useState(!1),a=i.useRef(null);function o(){a.current?.value?c(a.current.value):c("")}async function p(t){const l=/https:\/\/(www\.)?letterboxd\.com\/([A-Za-z0-9-_]+)(\/([A-Za-z0-9-_]+)\/([A-Za-z0-9-_]+))?/gi;/https:\/\/boxd\.it\/.+/gi.test(t)&&(t=await(await fetch(`/url/${encodeURIComponent(t)}`)).json());const w=[...t.matchAll(l)];let[,,b,,u,f]=w[0];return u||(u="watchlist"),`${b}${f?`${`|${f}`}`:""}`}async function d(){const t=await p(s);return`stremio://${new URL(window.location.href).host}/${t}/manifest.json`}async function x(){if(n(!0),s.length){o();const t=await d();await navigator.clipboard.writeText(t).catch(l=>{})}n(!1)}async function h(){if(n(!0),s.length){o();const t=await d();window.location.href=t}n(!1)}return e.jsxs("div",{className:"grid grid-cols-1 gap-1",children:[e.jsx("div",{className:"text-base",children:"A user's Letterboxd URL or a List URL:"}),e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"https://letterboxd.com/almosteffective",className:"w-full border border-black text-tailwind rounded text-xl px-2 py-1",ref:a,onChange:o,onBlur:o})}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{className:"grow border border-white bg-white uppercase text-tailwind text-lg p-2 rounded font-bold hover:bg-tailwind hover:text-white hover:underline",onClick:h,disabled:r,children:r===!1?"Install":"..."}),e.jsx("button",{className:"grow border border-transparent hover:border-white bg-tailwind uppercase text-white text-lg p-2 rounded font-normal",onClick:x,disabled:r,children:r===!1?"Copy":"..."})]})]})}export{j as default};
