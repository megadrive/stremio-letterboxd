import{j as t}from"./jsx-runtime.K1e75nIr.js";import{r as o}from"./index.NEDEFKed.js";function m(){const[f,l]=o.useState(""),[s,n]=o.useState(!1),[u,c]=o.useState(""),i=o.useRef(null);function r(){i.current?.value?l(i.current.value):l("")}async function d(){try{const e=btoa(JSON.stringify({url:f})),a=await fetch(`/verify/${e}`);if(!a.ok){const x=await a.json();alert(x);return}return await a.json()}catch(e){alert(`Try again in a few seconds: ${e.message}`)}return""}async function p(){n(!0),r();const e=await d();e.length&&(c(e),await navigator.clipboard.writeText(e).then(()=>alert("Copied, paste in Stremio!")).catch(a=>{n(!1)})),n(!1)}async function h(){try{n(!0),r();const e=await d();e.length&&(c(e),window.location.href=e,n(!1))}catch{n(!1)}}return t.jsxs("div",{className:"grid grid-cols-1 gap-1",children:[t.jsx("div",{className:"text-base",children:"A Letterboxd URL containing a list of posters (including any sorting!):"}),t.jsx("div",{children:t.jsx("input",{type:"text",placeholder:"https://letterboxd.com/almosteffective/watchlist",className:"w-full border border-black text-tailwind rounded text-xl px-2 py-1",ref:i,onPaste:r,onKeyDown:r,onKeyUp:r,onBlur:r,onFocus:r})}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{className:"grow border border-white bg-white uppercase text-tailwind text-lg p-2 rounded font-bold hover:bg-tailwind hover:text-white hover:underline",onClick:h,disabled:s,children:s===!1?"Install":"..."}),t.jsx("button",{className:"grow border border-transparent hover:border-white bg-tailwind uppercase text-white text-lg p-2 rounded font-normal",onClick:p,disabled:s,children:s===!1?"Copy":"..."})]}),t.jsx("div",{className:"hidden",children:u})]})}export{m as default};
