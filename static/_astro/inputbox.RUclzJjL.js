import{r as a}from"./index.NEDEFKed.js";var b={exports:{}},p={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _=a,L=Symbol.for("react.element"),R=Symbol.for("react.fragment"),S=Object.prototype.hasOwnProperty,U=_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,k={key:!0,ref:!0,__self:!0,__source:!0};function v(i,t,s){var e,l={},c=null,d=null;s!==void 0&&(c=""+s),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(d=t.ref);for(e in t)S.call(t,e)&&!k.hasOwnProperty(e)&&(l[e]=t[e]);if(i&&i.defaultProps)for(e in t=i.defaultProps,t)l[e]===void 0&&(l[e]=t[e]);return{$$typeof:L,type:i,key:c,ref:d,props:l,_owner:U.current}}p.Fragment=R;p.jsx=v;p.jsxs=v;b.exports=p;var r=b.exports;function O(){const[i,t]=a.useState(""),[s,e]=a.useState(!1),[l,c]=a.useState(""),[d,w]=a.useState(""),m=a.useRef(null),x=a.useRef(null);function o(){m.current?.value?t(m.current.value):t("")}function u(){x.current?.value?w(x.current.value):w("")}async function y(){const n=window.location.origin.includes(":4321")?"http://localhost:3030":window.location.origin;try{const f=btoa(JSON.stringify({url:i,base:n,posters:!1,customListName:d.length?d:void 0})),h=await fetch(`${n}/verify/${f}`);if(!h.ok){const N=await h.json();alert(N);return}return await h.json()}catch(f){alert(`Try again in a few seconds: ${f.message}`)}return""}async function g(){e(!0),o();const n=await y();n.length&&(c(n),await navigator.clipboard.writeText(n).then(()=>alert("Copied, paste in Stremio!")).catch(f=>{e(!1)})),e(!1)}async function j(){try{e(!0),o();const n=await y();n.length&&(c(n),window.location.href=n,e(!1))}catch{e(!1)}}return r.jsx("div",{children:r.jsxs("div",{className:"grid grid-cols-1 gap-1",children:[r.jsx("div",{className:"text-base",children:"A Letterboxd URL containing a list of posters (including any sorting!):"}),r.jsx("div",{children:r.jsx("input",{type:"text",placeholder:"https://letterboxd.com/almosteffective/watchlist",className:"w-full border border-black text-tailwind rounded text-xl px-2 py-1",ref:m,onPaste:o,onKeyDown:o,onKeyUp:o,onBlur:o,onFocus:o})}),r.jsx("div",{className:"text-base",children:"Set a custom list if you'd like (leave empty to auto-generate):"}),r.jsx("div",{children:r.jsx("input",{type:"text",placeholder:"My Cool List Name",className:"w-full border border-black text-tailwind rounded text-xl px-2 py-1",ref:x,onPaste:u,onKeyDown:u,onKeyUp:u,onBlur:u,onFocus:u})}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{className:"grow border border-white bg-white uppercase text-tailwind text-lg p-2 rounded font-bold hover:bg-tailwind hover:text-white hover:underline",onClick:j,disabled:s,children:s===!1?"Install":"..."}),r.jsx("button",{className:"grow border border-transparent hover:border-white bg-tailwind uppercase text-white text-lg p-2 rounded font-normal",onClick:g,disabled:s,children:s===!1?"Copy":"..."})]}),r.jsx("div",{className:"hidden",children:l})]})})}export{O as default};
